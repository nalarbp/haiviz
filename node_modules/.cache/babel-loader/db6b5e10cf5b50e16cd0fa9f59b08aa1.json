{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports['default'] = promiseMiddleware;\n\nvar _fluxStandardAction = require('flux-standard-action');\n\nfunction isPromise(val) {\n  return val && typeof val.then === 'function';\n}\n\nfunction promiseMiddleware(_ref) {\n  var dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (!_fluxStandardAction.isFSA(action)) {\n        return isPromise(action) ? action.then(dispatch) : next(action);\n      }\n\n      return isPromise(action.payload) ? action.payload.then(function (result) {\n        return dispatch(_extends({}, action, {\n          payload: result\n        }));\n      }, function (error) {\n        return dispatch(_extends({}, action, {\n          payload: error,\n          error: true\n        }));\n      }) : next(action);\n    };\n  };\n}\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}